/*! jquery.bitcoin-link.js | (c) 2013 Florian Boesch <pyalot@gmail.com> | http://opensource.org/licenses/MIT
http://codeflow.com/ 14rqCoRQcyEaoaXjc8iLwa2s7HNHGjiEjp
*/
(function(){var t,n;t=jQuery,n=function(n,i){var a,o,e,r,c,d;return e=t('<div class="bitcoin-link-overlay"></div>').appendTo("body").click(function(){return o.remove(),e.remove()}),o=t('<div class="bitcoin-link"></div>').appendTo("body"),null!=i?"$"===i[0]?(d=t("<h1>Send "+i+" = <span>?</span> <a href='http://bitcoin.org/'>Bitcoins</a></h1>").appendTo(o),c=d.find("span"),t.getJSON("http://data.mtgox.com/api/1/BTCUSD/ticker",function(t){var n,a,o;return n=parseFloat(i.slice(1))/parseFloat(t["return"].avg.value),n>=1?a=n.toFixed(3):(o=Math.floor(Math.log(n)/Math.log(10))-2,a=n.toFixed(-o)),c.text(a)})):d=t("<h1>Send "+i+" <a href='http://bitcoin.org/'>Bitcoins</a></h1>").appendTo(o):d=t('<h1>Send <a href="http://bitcoin.org/">Bitcoins</a></h1>').appendTo(o),t('<div class="close">X</div>').appendTo(o).click(function(){return o.remove(),e.remove()}),t("<h1></h1>").text(n).appendTo(o),a=t('<div class="buttons"></div>').appendTo(o),t("<a href='bitcoin:"+n+"'>Open</a>").appendTo(a),t("<a href='http://blockchain.info/address/"+n+"'>Blockchain.info</a>").appendTo(a),r=200,t("<div></div>").qrcode({width:r,height:r,text:n}).appendTo(o),o.css({marginLeft:-o.width()/2,marginTop:-o.height()/2})},t.fn.bitcoinLink=function(){return this.each(function(){var i,a,o,e,r,c;return o=t(this),e=o.attr("href"),r=e.match(/bitcoin:([13][123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz]+)/),null!=r?(i=r[1],a=null!=(c=o.attr("data-amount"))?c:o.data("amount"),o.click(function(t){return t.stopPropagation(),t.preventDefault(),n(i,a),!1})):void 0})}}).call(this);